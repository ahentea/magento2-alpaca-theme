<?php $url = $block->getReviewsUrl() . '#reviews'; ?>
<?php $urlForm = $block->getReviewsUrl() . '#review-form'; ?>

<div>
    <?php if ($block->getReviewsCount()): ?>
        <?php $rating = $block->getRatingSummary(); ?>
        <?php if ($rating): ?>
            <div class="review__rating">
                <div
                    class="rating"
                    aria-label="<?= /* @escapeNotVerified */ __('Average rating') . ': ' . $rating . '%' ?>"
                    title="<?= /* @escapeNotVerified */ __('Average rating') . ': ' . $rating . '%' ?>"
                    tabindex="0"
                >
                    <div
                        class="rating__star"
                        aria-hidden="true"
                        style="width:<?= /* @escapeNotVerified */  $rating; ?>%"
                    >
                        <span class="rating__indicator"></span>
                    </div>
                </div>

                <a
                    href="<?= /* @escapeNotVerified */ $url ?>"
                    class="review__amount"
                    title="<?= /* @escapeNotVerified */ $block->getReviewsCount() . __(' reviews') ?>"
                    data-mage-init='{ "goToReview": { "reviewId": "reviews" } }'
                >
                    (<?= $block->getReviewsCount() ?>)
                </a>
            </div>
        <?php endif; ?>
        <a
            href="<?= /* @escapeNotVerified */  $urlForm ?>"
            title="<?= /* @escapeNotVerified */  __('Add Your Review') ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?= /* @escapeNotVerified */  __('Add Your Review') ?>
        </a>
    <?php elseif ($block->getDisplayIfEmpty()): ?>
        <a
            href="<?= /* @escapeNotVerified */  $urlForm; ?>"
            title="<?= /* @escapeNotVerified */  __('Be the first to review this product') ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?= /* @escapeNotVerified */  __('Be the first to review this product') ?>
        </a>
    <?php endif; ?>
</div>
