<?php $url = $block->getReviewsUrl() . '#reviews'; ?>
<?php $urlForm = $block->getReviewsUrl() . '#review-form'; ?>

<?php if ($block->getReviewsCount()): ?>
    <?php $rating = $block->getRatingSummary(); ?>

    <div class="product-view__rating-rates <?= /* @escapeNotVerified */ !$rating ? ' no-rating' : ''?>"
         itemprop="aggregateRating"
         itemscope
         itemtype="http://schema.org/AggregateRating"
    >
        <?php if ($rating): ?>
            <div class="rating">
                <div class="rating__star" style="width:<?= /* @escapeNotVerified */  $rating; ?>%">
                    <span class="rating__indicator"></span>
                </div>
            </div>

            <span class="product-view__link product-view__link--rating">
                (<?= $block->getReviewsCount() ?>)
            </span>
        <?php endif; ?>
    </div>

    <div class="product-view__rating-actions">
        <a
            class="product-view__link product-view__link--add-review"
            href="<?= /* @escapeNotVerified */  $urlForm ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?= /* @escapeNotVerified */  __('Add Your Review') ?>
        </a>
    </div>
<?php elseif ($block->getDisplayIfEmpty()): ?>
    <div class="product-view__rating-actions">
        <a
            class="product-view__link product-view__link--add-review"
            href="<?= /* @escapeNotVerified */  $urlForm; ?>"
            data-mage-init='{ "goToReview": { "reviewId": "review-form" } }'
        >
            <?= /* @escapeNotVerified */  __('Be the first to review this product') ?>
        </a>
    </div>
<?php endif; ?>
